<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fleuris | Explore</title>
  <link rel="stylesheet" href="home.css">
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js"></script>
  <script defer src="https://www.gstatic.com/firebasejs/10.12.0/firebase-storage.js"></script>
  <script defer src="https://kit.fontawesome.com/3e7d28ddf5.js" crossorigin="anonymous"></script>
</head>
<body>
  <div class="top-bar">
    <div class="logo">Fleuris</div>
    <div class="level">üåº Blossom</div>
    <div class="settings-icon" onclick="toggleSettings()">‚öôÔ∏è</div>
  </div>

  <div class="settings-modal" id="settingsModal">
    <h3>Settings</h3>
    <label>Language:
      <select>
        <option>English</option>
        <option>French</option>
        <option>Arabic</option>
      </select>
    </label>
    <label>Currency:
      <select>
        <option>USD</option>
        <option>EUR</option>
        <option>EGP</option>
      </select>
    </label>
    <button onclick="signOut()">Sign Out</button>
    <button onclick="toggleSettings()">Close</button>
  </div>

  <div class="search-section">
    <input type="text" placeholder="Search for products..." />
    <button><i class="fas fa-camera"></i></button>
  </div>

  <div class="filters">
    <button class="active">All</button>
    <button>Tops</button>
    <button>Bottoms</button>
    <button>Accessories</button>
    <button>Makeup</button>
  </div>

  <div class="tab-section" id="exploreTab">
    <h2>Explore</h2>
    <div class="product-grid">
      <div class="placeholder">Products coming soon üå∏</div>
    </div>
  </div>

  <div class="tab-section hidden" id="aiTab">
    <h2>Flora AI Stylist</h2>
    <p>AI features coming soon...</p>
  </div>

  <div class="tab-section hidden" id="followingTab">
    <h2>Following</h2>
    <p>Followed sellers and collections will appear here.</p>
  </div>

  <div class="tab-section hidden" id="meTab">
    <h2>My Profile</h2>
    <p>View your badges, coins, and preferences here.</p>
  </div>

  <div class="bottom-nav">
    <button onclick="switchTab('exploreTab')" class="active"><i class="fas fa-compass"></i><br>Explore</button>
    <button onclick="switchTab('aiTab')"><i class="fas fa-robot"></i><br>AI Stylist</button>
    <button onclick="switchTab('followingTab')"><i class="fas fa-user-friends"></i><br>Following</button>
    <button onclick="switchTab('meTab')"><i class="fas fa-user"></i><br>Me</button>
  </div>

  <script type="module">

    <!-- Tabs Content -->
<div id="exploreTab" class="tab-content active">
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="Search products...">
    <button><i class="fas fa-search"></i></button>
  </div>

  <div class="filters">
    <button class="filter-button active" onclick="filterProducts('all')">All</button>
    <button class="filter-button" onclick="filterProducts('tops')">Tops</button>
    <button class="filter-button" onclick="filterProducts('bottoms')">Bottoms</button>
    <button class="filter-button" onclick="filterProducts('accessories')">Accessories</button>
    <button class="filter-button" onclick="filterProducts('makeup')">Makeup</button>
  </div>

      <div id="imageSearch">
  <h3>Upload a photo to search like items</h3>
  <input type="file" accept="image/*" id="imgSearchFile">
  <button onclick="imageSearch()">Search</button>
  <div id="imgSearchResults" class="product-grid"></div>
</div>
      
  <div class="product-grid" id="productGrid">
    <!-- Products will be dynamically shown here -->
    <div class="product-card">
      <img src="https://via.placeholder.com/160" alt="Product 1">
      <div class="product-info">
        <h3>Floral Top</h3>
        <p>$29.99</p>
      </div>
    </div>
    <div class="product-card">
      <img src="https://via.placeholder.com/160" alt="Product 2">
      <div class="product-info">
        <h3>Gold Necklace</h3>
        <p>$19.99</p>
      </div>
    </div>
    <!-- Add more dummy cards as needed -->
  </div>
</div>

<div id="aiStylistTab" class="tab-content">
  <h2>Flora: Your AI Stylist üå∏</h2>
  <p>Coming soon... chat with Flora for outfit advice, style tips, and lookbook magic!</p>
</div>

      <div id="floraModal" class="modal hidden">
  <div class="modal-content">
    <span class="close" onclick="toggleFlora()">&times;</span>
    <h2>Flora üå∏ ‚Äì Ask me anything</h2>
    <textarea id="floraInput" placeholder="Describe your style‚Ä¶" rows="3"></textarea>
    <input type="file" accept="image/*" id="floraImage">
    <button onclick="floraAsk()">Send</button>
    <div id="floraResponses"></div>
  </div>
</div>

<div id="followingTab" class="tab-content">
  <h2>Following</h2>
  <p>You‚Äôre not following anyone yet. Follow sellers to see their latest drops here!</p>
</div>

      <div id="sellerProfile" class="hidden">
  <h3 id="sellerName">Seller Name</h3>
  <button id="followBtn" onclick="toggleFollow()">Follow</button>
  <div id="sellerFeed" class="product-grid"></div>
</div>

      <div id="personalFeed" class="product-grid">
  <!-- Recommendations will show here -->
</div>
      
<div id="meTab" class="tab-content">
  <h2>My Profile</h2>
  <p>View your orders, coins, rewards, wishlist, and profile info here.</p>
</div>

      <div id="myProfile">
  <p>Level: <span id="userLevel"></span></p>
  <p>Coins: <span id="userCoins"></span></p>
  <div id="badgesContainer"></div>
</div>

      <div id="myLookbooks">
  <h3>My Lookbooks</h3>
  <button onclick="createLookbook()">+ New Lookbook</button>
  <div id="lookbookList" class="product-grid"></div>
</div>
      
<!-- AI Assistant Button -->
<button id="aiButton" title="Ask Flora">üåº</button>
      <button id="aiButton" title="Ask Flora" onclick="toggleFlora()">üåº</button>

<!-- Bottom Navigation -->
<div class="bottom-nav">
  <button onclick="showTab('exploreTab', this)" class="active"><i class="fas fa-store"></i><span>Explore</span></button>
  <button onclick="showTab('aiStylistTab', this)"><i class="fas fa-magic"></i><span>AI Stylist</span></button>
  <button onclick="showTab('followingTab', this)"><i class="fas fa-heart"></i><span>Following</span></button>
  <button onclick="showTab('meTab', this)"><i class="fas fa-user"></i><span>Me</span></button>
</div>
    
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyAx7DAvkZupSDXg4aXWvtfSQWhqX32Kwrs",
      authDomain: "fleuris-3df99.firebaseapp.com",
      projectId: "fleuris-3df99",
      storageBucket: "fleuris-3df99.appspot.com",
      messagingSenderId: "831344111439",
      appId: "1:831344111439:web:yourappid"
    };

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
    import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    onAuthStateChanged(auth, user => {
      if (!user) {
        window.location.href = "index.html"; // redirect if not logged in
      }
    });

    window.signOut = function () {
      signOut(auth).then(() => {
        window.location.href = "index.html";
      });
    };
  </script>

  <script>
    function toggleSettings() {
      document.getElementById("settingsModal").classList.toggle("show");
    }

    function switchTab(tabId) {
      const tabs = document.querySelectorAll(".tab-section");
      tabs.forEach(tab => tab.classList.add("hidden"));
      document.getElementById(tabId).classList.remove("hidden");

      const navButtons = document.querySelectorAll(".bottom-nav button");
      navButtons.forEach(btn => btn.classList.remove("active"));
      event.currentTarget.classList.add("active");
    }
    <script>
  function showTab(tabId, buttonElement) {
    // Hide all tabs
    document.querySelectorAll('.tab-content').forEach(tab => {
      tab.classList.remove('active');
    });

    // Show selected tab
    document.getElementById(tabId).classList.add('active');

    // Remove active state from all nav buttons
    document.querySelectorAll('.bottom-nav button').forEach(btn => {
      btn.classList.remove('active');
    });

    // Add active state to clicked button
    buttonElement.classList.add('active');
  }

  // Toggle settings modal
  document.getElementById('settingsBtn')?.addEventListener('click', () => {
    const modal = document.getElementById('settingsModal');
    modal.style.display = modal.style.display === 'block' ? 'none' : 'block';
  });

  // Filter buttons
  function filterProducts(category) {
    document.querySelectorAll('.filter-button').forEach(btn => {
      btn.classList.remove('active');
    });
    event.target.classList.add('active');

    // TODO: Add real filtering later based on Firestore product categories
  }

  // Sign out button (Firebase)
  document.getElementById('signOutBtn')?.addEventListener('click', () => {
    firebase.auth().signOut().then(() => {
      window.location.href = "index.html";
    });
  });

  // AI Button (just a placeholder for now)
  document.getElementById('aiButton')?.addEventListener('click', () => {
    alert("Flora will help you soon üå∏");
  });
  </script>
</body>
</html>
