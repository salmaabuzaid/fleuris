<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Fleuris Home</title>
  <link rel="stylesheet" href="home.css" />
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.3.1/firebase-storage.js"></script>
</head>
<body>

  <!-- Top Bar -->
  <div class="top-bar">
    <h1 class="brand-name">Fleuris</h1>
    <div class="user-level" id="userLevel">ğŸŒ¸ Rosebud</div>
    <button class="settings-btn" onclick="toggleSettings()">âš™ï¸</button>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="toggleSettings()">&times;</span>
      <h3>Settings</h3>
      <ul>
        <li><button onclick="switchLanguage()">Language</button></li>
        <li><button onclick="switchCurrency()">Currency</button></li>
        <li><button onclick="logout()">Sign Out</button></li>
      </ul>
    </div>
  </div>

  <!-- Tab Navigation -->
  <div class="tab-nav">
    <button class="tab-button active" onclick="switchTab('explore')">Explore</button>
    <button class="tab-button" onclick="switchTab('ai')">AI Stylist</button>
    <button class="tab-button" onclick="switchTab('following')">Following</button>
    <button class="tab-button" onclick="switchTab('me')">Me</button>
  </div>

  <!-- Explore Tab -->
  <div id="exploreTab" class="tab-section active">
    <div class="search-bar">
      <input type="text" placeholder="Search..." id="textSearch" />
      <input type="file" id="imageSearch" accept="image/*" />
      <button onclick="searchByImage()">ğŸ“·</button>
    </div>
    <div class="filters">
      <button class="filter-btn active">All</button>
      <button class="filter-btn">Tops</button>
      <button class="filter-btn">Bottoms</button>
      <button class="filter-btn">Accessories</button>
      <button class="filter-btn">Makeup</button>
    </div>
    <div class="product-grid" id="productGrid"></div>
  </div>

  <!-- AI Tab -->
  <div id="aiTab" class="tab-section">
    <div class="ai-container">
      <h2>ğŸ§  Ask Flora, your AI stylist</h2>
      <textarea id="aiInput" placeholder="What do you need help with today?"></textarea>
      <button onclick="askAI()">Ask</button>
      <div id="aiResponse"></div>
    </div>
  </div>

  <!-- Following Tab -->
  <div id="followingTab" class="tab-section">
    <h2>ğŸ’¬ Seller Communities</h2>
    <div id="followingFeed"></div>
  </div>

  <!-- Me Tab -->
  <div id="meTab" class="tab-section">
    <h2>ğŸ‘¤ My Profile</h2>
    <p><strong>Level:</strong> <span id="buyerLevel">Rosebud</span></p>
    <p><strong>Coins:</strong> <span id="coinCount">0</span></p>
    <p><strong>Badges:</strong> <span id="badgeList">None</span></p>
    <h3>Wishlist</h3>
    <div id="wishlistItems"></div>
    <h3>Lookbooks</h3>
    <div id="lookbookContainer"></div>
  </div>

  <!-- AI Modal -->
  <div id="aiModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="toggleAIModal()">&times;</span>
      <h2>Flora AI Stylist</h2>
      <textarea id="modalAIInput" placeholder="Ask me anything!"></textarea>
      <button onclick="askAI()">Submit</button>
      <div id="modalAIResponse"></div>
    </div>
  </div>

  <script>
    const settingsModal = document.getElementById("settingsModal");
    const aiModal = document.getElementById("aiModal");

    function toggleSettings() {
      settingsModal.classList.toggle("show");
    }

    function toggleAIModal() {
      aiModal.classList.toggle("show");
    }

    function switchTab(tabId) {
      document.querySelectorAll(".tab-section").forEach(tab => tab.classList.remove("active"));
      document.querySelectorAll(".tab-button").forEach(btn => btn.classList.remove("active"));
      document.getElementById(tabId + "Tab").classList.add("active");
      const btn = Array.from(document.querySelectorAll(".tab-button")).find(b => b.textContent.toLowerCase().includes(tabId));
      if (btn) btn.classList.add("active");
    }

    function searchByImage() {
      const file = document.getElementById("imageSearch").files[0];
      if (!file) return alert("Upload an image.");
      // Logic inside home.js
    }

    function askAI() {
      const question = document.getElementById("aiInput").value;
      // Logic inside home.js
    }

    function logout() {
      firebase.auth().signOut().then(() => window.location.href = 'index.html');
    }

    function switchLanguage() {
      alert("Language switch coming soon!");
    }

    function switchCurrency() {
      alert("Currency switch coming soon!");
    }
  </script>

  <script src="home.js"></script>
</body>
</html>
