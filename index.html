<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fleuris - Your Garden of Unique Brands</title>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />

  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#5AA582" />

  <style>
    /* Background gradient for fresh pastel vibe */
    body {
      margin: 0;
      padding: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #DFF3E3, #B8D3C7);
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #2A4D3B;
    }

    /* Card container with white background and shadow */
    .container {
      background: white;
      padding: 3rem 2.5rem;
      border-radius: 15px;
      box-shadow: 0 10px 25px rgba(90, 165, 130, 0.3);
      width: 360px;
      text-align: center;
      position: relative;
    }

    /* Logo area with flower icon and brand name */
    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-bottom: 0.3rem;
    }
    .logo svg {
      width: 32px;
      height: 32px;
      fill: #5AA582;
      animation: bloom 2s ease-in-out infinite alternate;
    }
    @keyframes bloom {
      0% { transform: scale(0.9); opacity: 0.8; }
      100% { transform: scale(1.1); opacity: 1; }
    }

    /* Brand title */
    h1 {
      font-weight: 700;
      font-size: 2.4rem;
      margin: 0;
      color: #2A4D3B;
    }

    /* Tagline under brand */
    .tagline {
      font-style: italic;
      color: #5AA582;
      margin: 0.5rem 0 2rem;
      font-size: 1.1rem;
    }

    /* Input styling with subtle shadows */
    input[type="email"],
    input[type="password"],
    input[type="text"],
    select {
      width: 100%;
      padding: 12px 15px;
      margin: 0.6rem 0 1.4rem;
      border-radius: 8px;
      border: 1px solid #B8D3C7;
      font-size: 1rem;
      box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
      transition: border-color 0.3s ease;
    }
    input[type="email"]:focus,
    input[type="password"]:focus,
    input[type="text"]:focus,
    select:focus {
      outline: none;
      border-color: #5AA582;
      box-shadow: 0 0 8px #5AA582AA;
    }

    /* Button with smooth color transition on hover */
    button {
      width: 100%;
      background-color: #5AA582;
      border: none;
      padding: 14px;
      color: white;
      font-size: 1.1rem;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
      box-shadow: 0 5px 12px rgba(90, 165, 130, 0.5);
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    button:hover {
      background-color: #4A8B60;
      transform: translateY(-2px);
    }

    /* Toggle link below buttons */
    .toggle {
      color: #5AA582;
      cursor: pointer;
      text-decoration: underline;
      font-size: 0.95rem;
      margin-top: 0.7rem;
      user-select: none;
    }

    /* Error message styling */
    .error {
      color: #c53030;
      margin: 1rem 0 0;
      font-weight: 600;
      font-size: 0.95rem;
    }
  </style>
</head>
<body>

  <div class="container" id="auth-container">
    <div class="logo" aria-label="Fleuris logo with flower icon">
      <!-- Simple flower SVG icon -->
      <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false">
        <circle cx="32" cy="32" r="10" />
        <path d="M32 10 L32 22 M32 42 L32 54 M10 32 L22 32 M42 32 L54 32 M18 18 L26 26 M38 38 L46 46 M18 46 L26 38 M38 26 L46 18" stroke="#5AA582" stroke-width="3" stroke-linecap="round"/>
      </svg>
      <h1>Fleuris</h1>
    </div>

    <p class="tagline">Your Garden of Unique Brands.</p>

    <div id="signup-form">
      <input type="text" id="signup-name" placeholder="Full Name" required aria-label="Full Name" />
      <input type="email" id="signup-email" placeholder="Email" required aria-label="Email" />
      <input type="password" id="signup-password" placeholder="Password" required aria-label="Password" />
      <select id="signup-role" required aria-label="Select Role">
        <option value="" disabled selected>Select Role</option>
        <option value="buyer">Buyer</option>
        <option value="seller">Seller</option>
      </select>
      <button id="signup-btn" aria-label="Sign Up">Sign Up</button>
      <div class="toggle" id="to-login" role="button" tabindex="0">Already have an account? Log in</div>
      <div class="error" id="signup-error" aria-live="polite"></div>
    </div>

    <div id="login-form" style="display:none;">
      <input type="email" id="login-email" placeholder="Email" required aria-label="Email" />
      <input type="password" id="login-password" placeholder="Password" required aria-label="Password" />
      <button id="login-btn" aria-label="Log In">Log In</button>
      <div class="toggle" id="to-signup" role="button" tabindex="0">Don't have an account? Sign up</div>
      <div class="error" id="login-error" aria-live="polite"></div>
    </div>
  </div>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js"></script>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyAx7DAvkZupSDXg4aXWvtfSQWhqX32Kwrs",
      authDomain: "fleuris-3df99.firebaseapp.com",
      projectId: "fleuris-3df99",
      storageBucket: "fleuris-3df99.appspot.com",
      messagingSenderId: "831344111439",
      appId: "1:831344111439:web:YOUR_APP_ID"
    };

    // Initialize Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // Elements
    const signupForm = document.getElementById('signup-form');
    const loginForm = document.getElementById('login-form');
    const toLogin = document.getElementById('to-login');
    const toSignup = document.getElementById('to-signup');
    const signupError = document.getElementById('signup-error');
    const loginError = document.getElementById('login-error');

    // Toggle forms
    toLogin.onclick = () => {
      signupForm.style.display = 'none';
      loginForm.style.display = 'block';
      signupError.textContent = '';
      loginError.textContent = '';
    };
    toSignup.onclick = () => {
      loginForm.style.display = 'none';
      signupForm.style.display = 'block';
      signupError.textContent = '';
      loginError.textContent = '';
    };

    // Sign up
    document.getElementById('signup-btn').addEventListener('click', async () => {
      signupError.textContent = '';
      const name = document.getElementById('signup-name').value.trim();
      const email = document.getElementById('signup-email').value.trim();
      const password = document.getElementById('signup-password').value;
      const role = document.getElementById('signup-role').value;

      if (!name || !email || !password || !role) {
        signupError.textContent = 'Please fill all fields.';
        return;
      }

      try {
        const userCredential = await auth.createUserWithEmailAndPassword(email, password);
        const user = userCredential.user;

        // Add user document in Firestore
        await db.collection('users').doc(user.uid).set({
          name,
          email,
          role,
          coins: 0,
          level: 1,
          badges: [],
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        });

        alert('Signup successful! Redirecting...');
        window.location.href = 'home.html';
      } catch (error) {
        signupError.textContent = error.message;
      }
    });

    // Login
    document.getElementById('login-btn').addEventListener('click', async () => {
      loginError.textContent = '';
      const email = document.getElementById('login-email').value.trim();
      const password = document.getElementById('login-password').value;

      if (!email || !password) {
        loginError.textContent = 'Please enter email and password.';
        return;
      }

      try {
        await auth.signInWithEmailAndPassword(email, password);
        alert('Login successful! Redirecting...');
        window.location.href = 'home.html';
      } catch (error) {
        loginError.textContent = error.message;
      }
    });

    // Register Service Worker for PWA
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('service-worker.js')
          .then(reg => console.log('Service Worker registered.', reg))
          .catch(err => console.error('Service Worker registration failed:', err));
      });
    }
  </script>

</body>
</html>
